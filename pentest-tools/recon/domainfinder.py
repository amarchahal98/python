#!/usr/bin/python3
# Requires assetfinder.py: https://github.com/tomnomnom/assetfinder
# Usage: domainfinder.py domain.com

import sys, os, re
from os import path


url = sys.argv[1]

if path.exists(url) != True:
    os.mkdir(url)

if path.exists(url + "/recon") != True:
    os.mkdir(url + "/recon")



print("[+] Harvesting subdomaiuns with assetfinder...")
os.system("assetfinder " + url + " >> " + url + "/recon/assets.txt")
# os.system("cat " + url + "/recon/assets.txt | grep " + url " >> " + url + "/recon/subdomains.txt")

f = open(url + "/recon/assets.txt")
outfile = open(url + "/recon/subdomains.txt", 'w')

for line in f:
    regex = url
    search = re.compile(regex)
    result = re.search(search, line)
    if result != None:
        outfile.write(line)
